<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    
    
    <link rel="shortcut icon" href="img/favicon.ico">

    
    <title>Home - Combine</title>
    

    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.12.0/css/all.css">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.12.0/css/v4-shims.css">
    <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/hack-font@3.3.0/build/web/hack.min.css">
    <link href='//rsms.me/inter/inter.css' rel='stylesheet' type='text/css'>
    <link href='//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,700italic,400,300,600,700&subset=latin-ext,latin' rel='stylesheet' type='text/css'>
    <link href="css/bootstrap-custom.min.css" rel="stylesheet">
    <link href="css/base.min.css" rel="stylesheet">
    <link href="css/cinder.min.css" rel="stylesheet">

    
        
        <link rel="stylesheet" href="//cdn.jsdelivr.net/gh/highlightjs/cdn-release@9.18.0/build/styles/github.min.css">
        
    
    <link href="mystyle.css" rel="stylesheet">

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
            <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
            <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
        <![endif]-->

    

     
</head>

<body class="homepage" >

    <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            

            <!-- Main title -->

            
              <a class="navbar-brand" href=".">Combine</a>
            
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
                <!-- Main navigation -->
                <ul class="nav navbar-nav">
                
                
                    <li class="active">
                        <a href=".">Home</a>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Setting up the analysis <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="part2/settinguptheanalysis/">Preparing the datacard</a>
</li>

                        
                            
<li >
    <a href="part2/physicsmodels/">Physics models</a>
</li>

                        
                            
<li >
    <a href="part2/bin-wise-stats/">Automatic MC statistical uncertainties</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Running combine <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="part3/runningthetool/">Running the tool</a>
</li>

                        
                            
<li >
    <a href="part3/commonstatsmethods/">Common statistical methods</a>
</li>

                        
                            
<li >
    <a href="part3/nonstandard/">Advanced use cases</a>
</li>

                        
                            
<li >
    <a href="part3/regularisation/">Unfolding & regularization</a>
</li>

                        
                            
<li >
    <a href="part3/validation/">Validating datacards</a>
</li>

                        
                            
<li >
    <a href="part3/debugging/">Debugging fit failures</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li >
                        <a href="part4/usefullinks/">Links & FAQ</a>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Tutorials <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="part5/roofit/">RooFit Basics</a>
</li>

                        
                            
<li >
    <a href="part5/longexercise/">Exercise: main features</a>
</li>

                        
                            
<li >
    <a href="part5/longexerciseanswers/">Solutions to long exercise</a>
</li>

                        
                        </ul>
                    </li>
                
                
                </ul>

            <ul class="nav navbar-nav navbar-right">
                    <li>
                        <a href="#" data-toggle="modal" data-target="#mkdocs_search_modal">
                            <i class="fas fa-search"></i> Search
                        </a>
                    </li>
                    <li class="disabled">
                        <a rel="prev" >
                            <i class="fas fa-arrow-left"></i> Previous
                        </a>
                    </li>
                    <li >
                        <a rel="next" href="part2/settinguptheanalysis/">
                            Next <i class="fas fa-arrow-right"></i>
                        </a>
                    </li>
                    <li>
                        <a href="https://github.com/cms-analysis/HiggsAnalysis-CombinedLimit/edit/102x/docs/index.md"><i class="fab fa-github"></i> Edit on GitHub</a>
                    </li>
            </ul>
        </div>
    </div>
</div>

    <div class="container">
        
        
        <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
        <li class="first-level active"><a href="#introduction">Introduction</a></li>
        <li class="first-level "><a href="#setting-up-the-environment-and-installation">Setting up the environment and installation</a></li>
            <li class="second-level"><a href="#for-end-users-that-dont-need-to-commit-or-do-any-development">For end users that don't need to commit or do any development</a></li>
                
                <li class="third-level"><a href="#cc7-release-cmssw_10_2_x-recommended-version">CC7 release CMSSW_10_2_X - recommended version</a></li>
                <li class="third-level"><a href="#slc6cc7-release-cmssw_8_1_x">SLC6/CC7 release CMSSW_8_1_X</a></li>
            <li class="second-level"><a href="#standalone-version">Standalone version</a></li>
                
            <li class="second-level"><a href="#what-has-changed-between-tags">What has changed between tags?</a></li>
                
            <li class="second-level"><a href="#for-developers">For developers</a></li>
                
                <li class="third-level"><a href="#recommended-way-to-develop-a-feature-in-a-branch">Recommended way to develop a feature (in a branch)</a></li>
            <li class="second-level"><a href="#combine-tool">Combine Tool</a></li>
                
        <li class="first-level "><a href="#standalone-version-of-combine">Standalone version of combine</a></li>
            <li class="second-level"><a href="#available-machines-for-standalone-combine">Available machines for standalone combine</a></li>
                
    </ul>
</div></div>
        <div class="col-md-9" role="main">

<h1 id="introduction">Introduction</h1>
<p>These pages document the <a href="https://twiki.cern.ch/twiki/bin/view/RooStats/WebHome">RooStats</a> / <a href="https://root.cern.ch/roofit">RooFit</a> - based software tools used for statistical analysis within the <a href="HiggsWG">Higgs PAG</a> - <strong>combine</strong>.</p>
<p>Combine provides a command line interface to many different statistical techniques available inside RooFit/RooStats used widely inside CMS.</p>
<p>The package exists in GIT under <a href="https://github.com/cms-analysis/HiggsAnalysis-CombinedLimit">https://github.com/cms-analysis/HiggsAnalysis-CombinedLimit</a></p>
<p>For more information about GIT and its usage in CMS, see <a href="http://cms-sw.github.io/cmssw/faq.html">http://cms-sw.github.io/cmssw/faq.html</a></p>
<p>The code can be checked out from GIT and compiled on top of a CMSSW release that includes a recent RooFit/RooStats</p>
<h1 id="setting-up-the-environment-and-installation">Setting up the environment and installation</h1>
<p>The instructions below are for installation within a CMSSW environment</p>
<h2 id="for-end-users-that-dont-need-to-commit-or-do-any-development">For end users that don't need to commit or do any development</h2>
<p>You can find the latest releases on github under <a href="https://github.com/cms-analysis/HiggsAnalysis-CombinedLimit/releases">https://github.com/cms-analysis/HiggsAnalysis-CombinedLimit/releases</a></p>
<h3 id="cc7-release-cmssw_10_2_x-recommended-version">CC7 release <code>CMSSW_10_2_X</code> - recommended version</h3>
<p>Setting up the environment (once):</p>
<pre><code class="language-sh">export SCRAM_ARCH=slc7_amd64_gcc700
cmsrel CMSSW_10_2_13
cd CMSSW_10_2_13/src
cmsenv
git clone https://github.com/cms-analysis/HiggsAnalysis-CombinedLimit.git HiggsAnalysis/CombinedLimit
cd HiggsAnalysis/CombinedLimit
</code></pre>
<p>Update to a recommended tag - currently the recommended tag is <strong>v8.2.0</strong>: <a href="https://github.com/cms-analysis/HiggsAnalysis-CombinedLimit/releases/tag/v8.2.0">see release notes</a></p>
<pre><code class="language-sh">cd $CMSSW_BASE/src/HiggsAnalysis/CombinedLimit
git fetch origin
git checkout v8.2.0
scramv1 b clean; scramv1 b # always make a clean build
</code></pre>
<h3 id="slc6cc7-release-cmssw_8_1_x">SLC6/CC7 release <code>CMSSW_8_1_X</code></h3>
<p>Setting up the environment (once):</p>
<pre><code class="language-sh"># For CC7:
export SCRAM_ARCH=slc7_amd64_gcc530
# For SLC6:
export SCRAM_ARCH=slc6_amd64_gcc530

cmsrel CMSSW_8_1_0
cd CMSSW_8_1_0/src
cmsenv
git clone https://github.com/cms-analysis/HiggsAnalysis-CombinedLimit.git HiggsAnalysis/CombinedLimit
cd HiggsAnalysis/CombinedLimit
</code></pre>
<p>Update to a recommended tag - currently the recommended tag for CMSSW_8_1_X is <strong>v7.0.13</strong>:</p>
<pre><code class="language-sh">cd $CMSSW_BASE/src/HiggsAnalysis/CombinedLimit
git fetch origin
git checkout v7.0.13
scramv1 b clean; scramv1 b # always make a clean build
</code></pre>
<h2 id="standalone-version">Standalone version</h2>
<p>The standalone version can be easily compiled using the <code>cvmfs</code> as it relies on dependencies which are already installed at <a href="/cvmfs/cms.cern.ch/">/cvmfs/cms.cern.ch/</a>. </p>
<p>Access to <code>/cvmfs/cms.cern.ch/</code> can be obtained from lxplus machines or via <code>CernVM</code>, by adding the <code>CMS</code> group to the CVMFS Configuration. See instructions for <a href="http://cms-analysis.github.io/HiggsAnalysis-CombinedLimit/#standalone-version-of-combine">standalone version</a>. In case you do not want to use the <code>cvmfs</code> area, you will need to adapt the location of the dependencies listed in both the <code>Makefile</code> and <code>env_standalone.sh</code> files.</p>
<pre><code>git clone https://github.com/cms-analysis/HiggsAnalysis-CombinedLimit.git HiggsAnalysis/CombinedLimit
cd HiggsAnalysis/CombinedLimit/ 
git fetch origin
git checkout v8.2.0
. env_standalone.sh
make
</code></pre>
<p>You will need to source <code>env_standalone.sh</code> each time you want to use the package, or add it to your login.</p>
<h2 id="what-has-changed-between-tags">What has changed between tags?</h2>
<p>You can generate a diff of any two tags (eg for <code>v7.0.8</code> and <code>v7.0.6</code>) by using following the url:</p>
<p><a href="https://github.com/cms-analysis/HiggsAnalysis-CombinedLimit/compare/v7.0.6...v7.0.7">https://github.com/cms-analysis/HiggsAnalysis-CombinedLimit/compare/v7.0.6...v7.0.7</a></p>
<p>Replace the tag names in the url to any tags you which to compare.</p>
<h2 id="for-developers">For developers</h2>
<p>We use the <em>Fork and Pull</em> model for development: each user creates a copy of the repository on github, commits their requests there and then sends pull requests for the administrators to merge.</p>
<p><em>Prerequisites</em></p>
<ol>
<li>
<p>Register on github, as needed anyway for CMSSW development: <a href="http://cms-sw.github.io/cmssw/faq.html">http://cms-sw.github.io/cmssw/faq.html</a></p>
</li>
<li>
<p>Register your SSH key on github: <a href="https://help.github.com/articles/generating-ssh-keys">https://help.github.com/articles/generating-ssh-keys</a> 1 Fork the repository to create your copy of it: <a href="https://github.com/cms-analysis/HiggsAnalysis-CombinedLimit/fork">https://github.com/cms-analysis/HiggsAnalysis-CombinedLimit/fork</a> (more documentation at <a href="https://help.github.com/articles/fork-a-repo">https://help.github.com/articles/fork-a-repo</a> )</p>
</li>
</ol>
<p>You will now be able to browse your fork of the repository from <a href="https://github.com/your-github-user-name/HiggsAnalysis-CombinedLimit">https://github.com/your-github-user-name/HiggsAnalysis-CombinedLimit</a></p>
<h3 id="recommended-way-to-develop-a-feature-in-a-branch">Recommended way to develop a feature (in a branch)</h3>
<pre><code class="language-sh"># get the updates of the master branch of the remote repository
git fetch upstream

# branch straight off the upstream master
git checkout -b feature_name_branch upstream/81x-root606

# implement the feature
# commit, etc

# before publishing:
# get the updates of the master branch of the remote repository
git fetch upstream

# if you're ready to integrate the upstream changes into your repository do
git rebase upstream/81x-root606

# fix any conflicts
git push origin feature_name_branch
</code></pre>
<p>And proceed to make a pull request from the branch you created.</p>
<h4 id="committing-changes-to-your-repository">Committing changes to your repository</h4>
<pre><code class="language-sh">git add ....
git commit -m &quot;....&quot;
git push
</code></pre>
<p>You can now make a pull request to the repository.</p>
<h2 id="combine-tool">Combine Tool</h2>
<p>An additional tool for submitting combine jobs to batch/crab, developed originally for HiggsToTauTau. Since the repository contains a certain amount of analysis-specific code, the following scripts can be used to clone it with a sparse checkout for just the core <a href="https://github.com/cms-analysis/CombineHarvester/blob/master/CombineTools/"><code>CombineHarvester/CombineTools</code></a> subpackage, speeding up the checkout and compile times:</p>
<p>git clone via ssh:</p>
<pre><code class="language-sh">bash &lt;(curl -s https://raw.githubusercontent.com/cms-analysis/CombineHarvester/master/CombineTools/scripts/sparse-checkout-ssh.sh)
</code></pre>
<p>git clone via https:</p>
<pre><code class="language-sh">bash &lt;(curl -s https://raw.githubusercontent.com/cms-analysis/CombineHarvester/master/CombineTools/scripts/sparse-checkout-https.sh)
</code></pre>
<p>make sure to run <code>scram</code>  to compile the <code>CombineTools</code> package.</p>
<p>See the <a href="http://cms-analysis.github.io/CombineHarvester/"><code>CombineHarvester</code></a> documentation pages for more details on using this tool and additional features available in the full package.</p>
<h1 id="standalone-version-of-combine">Standalone version of combine</h1>
<p>Combine is also released as a standalone package, still meant to be run on SLC7 machines. Please note that while the CMSSW version is maintained regularly, the same might not be true for the standalone version. For CMS members, we advise to use the CMSSW version when possible.</p>
<p>To compile the standalone version on suitable machines, please run:</p>
<pre><code>git clone https://github.com/cms-analysis/HiggsAnalysis-CombinedLimit.git HiggsAnalysis/CombinedLimit
cd HiggsAnalysis/CombinedLimit/ 
git fetch origin
git checkout v8.2.0
. env_standalone.sh
make
</code></pre>
<p>You will need to source env_standalone.sh each time you want to use the package, or add it to your login. </p>
<h2 id="available-machines-for-standalone-combine">Available machines for standalone combine</h2>
<p>The standalone version can be easily compiled via <em>CVMFS</em> as it relies on dependencies which are already installed at <em>/cvmfs/cms.cern.ch/</em>. Access to <em>/cvmfs/cms.cern.ch/</em> can be obtained from lxplus machines or via <a href="https://cernvm-online.cern.ch/"><code>CernVM</code></a>. The only requirement will be to add the <em>CMS</em> group to the CVMFS configuration as shown in the picture</p>
<p><img alt="" src="cvmsf_config.png" /></p>
<p>At least 2GB of disk space should be reserved on the virtual machine for combine to work properly. A minimal CernVM working context setup can be found in the CernVM Marketplace under <a href="https://cernvm-online.cern.ch/context/view/9ee5960ce4b143f5829e72bbbb26d382"><code>Experimental/HiggsCombine</code></a>. </p>
<p>To use this predefined context, first locally launch the CernVM (eg you can use the .ova with VirtualBox, by downloading from <a href="http://cernvm.cern.ch/releases/production/cernvm4-micro-2020.07-1.ova">here</a> and launching the downloaded file. You can click on "pair an instance of CernVM" from the cernvm-online dashboard, which displays a PIN. In the VirtualBox terminal, pair the virtual machine with this PIN code (enter in the terminal using #PIN eg <code>#123456</code>. After this, you will be asked again for username (use <code>user</code>) and then a password (use <code>hcomb</code>).</p>
<p>In case you do not want to use the cvmfs area, you will need to adapt the location of the dependencies listed in both the Makefile and env_standalone.sh files.</p></div>
        
        
    </div>

    
      <footer class="col-md-12 text-center">
          
          
            <hr>
            <p>
            <small>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a>.</small>
            </p>
          

          
          
      </footer>
    
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <script src="js/bootstrap-3.0.3.min.js"></script>

    
    <script src="//cdn.jsdelivr.net/gh/highlightjs/cdn-release@9.18.0/build/highlight.min.js"></script>
        
    <script>hljs.initHighlightingOnLoad();</script>
    

    <script>var base_url = "."</script>
    
    <script src="js/base.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML"></script>
    <script src="search/main.js"></script>

    <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">
                    <span aria-hidden="true">&times;</span>
                    <span class="sr-only">Close</span>
                </button>
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
            </div>
            <div class="modal-body">
                <p>
                    From here you can search these documents. Enter
                    your search terms below.
                </p>
                <form>
                    <div class="form-group">
                        <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>
    </body>

</html>

<!--
MkDocs version : 1.5.3
Build Date UTC : 2024-04-08 07:18:34.552201+00:00
-->
