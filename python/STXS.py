# For STXStoEFT models

# Python script to hold dictionary of processes in STXS Stages

# using convention in https://twiki.cern.ch/twiki/bin/viewauth/CMS/HiggsTemplateCrossSection

# List for processes without a scaling function
fixed_procs = ["ggZH_lep", "tHq", "tHW", "bbH"]

# ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
stage0_procs = {
    "ggH": ["ggH","bbH","ggZH_had"],
    "qqH": ["qqH"],
    "WH_lep": ["WH_lep"],
    "ZH_lep": ["ZH_lep"],
    'ggZH_lep':['ggZH_lep'],
    "VH_had": ["WH_had", "ZH_had"],
    "ttH": ["ttH"],
    'other':['tHq','tHW','bbH',"WH","ZH"]
}

# ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
stage1_procs = {
    "ggH": [
        "ggH_VBFTOPO_JET3VETO",
        "ggH_VBFTOPO_JET3",
        "ggH_0J",
        "ggH_1J_PTH_0_60",
        "ggH_1J_PTH_60_120",
        "ggH_1J_PTH_120_200",
        "ggH_1J_PTH_GT200",
        "ggH_GE2J_PTH_0_60",
        "ggH_GE2J_PTH_60_120",
        "ggH_GE2J_PTH_120_200",
        "ggH_GE2J_PTH_GT200",
    ],
    "qqH": ["qqH_VBFTOPO_JET3VETO", "qqH_VBFTOPO_JET3", "qqH_VH2JET", "qqH_REST", "qqH_PTJET1_GT200"],
    "WH_lep": ["WH_lep_PTV_0_150", "WH_lep_PTV_150_250_0J", "WH_lep_PTV_150_250_GE1J", "WH_lep_PTV_GT250"],
    "ZH_lep": ["ZH_lep_PTV_0_150", "ZH_lep_PTV_150_250_0J", "ZH_lep_PTV_150_250_GE1J", "ZH_lep_PTV_GT250"],
    #'ggZH_lep':['ggZH_lep_PTV_0_150', 'ggZH_lep_PTV_GT150_0J', 'ggZH_lep_PTV_GT150_GE1J'],
    "VH_had": [
        "WH_had_VBFTOPO_JET3VETO",
        "WH_had_VBFTOPO_JET3",
        "WH_had_VH2JET",
        "WH_had_REST",
        "WH_had_PTJET1_GT200",
        "ZH_had_VBFTOPO_JET3VETO",
        "ZH_had_VBFTOPO_JET3",
        "ZH_had_VH2JET",
        "ZH_had_REST",
        "ZH_had_PTJET1_GT200",
    ],
    "ttH": ["ttH"]  # ,
    #'other':['tHq','tHW','bbH']
}

# ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
stage1_1_procs = {
    "ggH": [
        "ggH_PTH_GT200",
        "ggH_0J_PTH_0_10",
        "ggH_0J_PTH_GT10",
        "ggH_1J_PTH_0_60",
        "ggH_1J_PTH_60_120",
        "ggH_1J_PTH_120_200",
        "ggH_GE2J_MJJ_0_350_PTH_0_60",
        "ggH_GE2J_MJJ_0_350_PTH_60_120",
        "ggH_GE2J_MJJ_0_350_PTH_120_200",
        "ggH_GE2J_MJJ_350_700_PTH_0_200_PTHJJ_0_25",
        "ggH_GE2J_MJJ_350_700_PTH_0_200_PTHJJ_GT25",
        "ggH_GE2J_MJJ_GT700_PTH_0_200_PTHJJ_0_25",
        "ggH_GE2J_MJJ_GT700_PTH_0_200_PTHJJ_GT25",
    ],
    "qqH": [
        "qqH_0J",
        "qqH_1J",
        "qqH_GE2J_MJJ_0_60",
        "qqH_GE2J_MJJ_60_120",
        "qqH_GE2J_MJJ_120_350",
        "qqH_GE2J_MJJ_GT350_PTH_GT200",
        "qqH_GE2J_MJJ_350_700_PTH_0_200_PTHJJ_0_25",
        "qqH_GE2J_MJJ_350_700_PTH_0_200_PTHJJ_GT25",
        "qqH_GE2J_MJJ_GT700_PTH_0_200_PTHJJ_0_25",
        "qqH_GE2J_MJJ_GT700_PTH_0_200_PTHJJ_GT25",
    ],
    "WH_lep": ["WH_lep_PTV_0_75", "WH_lep_PTV_75_150", "WH_lep_PTV_150_250_0J", "WH_lep_PTV_150_250_GE1J", "WH_lep_PTV_GT250"],
    "ZH_lep": ["ZH_lep_PTV_0_75", "ZH_lep_PTV_75_150", "ZH_lep_PTV_150_250_0J", "ZH_lep_PTV_150_250_GE1J", "ZH_lep_PTV_GT250"],
    #'ggZH_lep':['ggZH_lep_PTV_0_75','ggZH_lep_PTV_75_150','ggZH_lep_PTV_150_250_0J','ggZH_lep_PTV_150_250_GE1J','ggZH_lep_PTV_GT250'],
    "VH_had": [
        "WH_had_0J",
        "WH_had_1J",
        "WH_had_GE2J_MJJ_0_60",
        "WH_had_GE2J_MJJ_60_120",
        "WH_had_GE2J_MJJ_120_350",
        "WH_had_GE2J_MJJ_GT350_PTH_GT200",
        "WH_had_GE2J_MJJ_350_700_PTH_0_200_PTHJJ_0_25",
        "WH_had_GE2J_MJJ_350_700_PTH_0_200_PTHJJ_GT25",
        "WH_had_GE2J_MJJ_GT700_PTH_0_200_PTHJJ_0_25",
        "WH_had_GE2J_MJJ_GT700_PTH_0_200_PTHJJ_GT25",
        "ZH_had_0J",
        "ZH_had_1J",
        "ZH_had_GE2J_MJJ_0_60",
        "ZH_had_GE2J_MJJ_60_120",
        "ZH_had_GE2J_MJJ_120_350",
        "ZH_had_GE2J_MJJ_GT350_PTH_GT200",
        "ZH_had_GE2J_MJJ_350_700_PTH_0_200_PTHJJ_0_25",
        "ZH_had_GE2J_MJJ_350_700_PTH_0_200_PTHJJ_GT25",
        "ZH_had_GE2J_MJJ_GT700_PTH_0_200_PTHJJ_0_25",
        "ZH_had_GE2J_MJJ_GT700_PTH_0_200_PTHJJ_GT25",
    ],
    "ttH": ["ttH"]  # ,
    #'other':['tHq','tHW','bbH']
}

stage1_2_procs = {
    "ggH": [
        "ggH_PTH_200_300",
        "ggH_PTH_300_450",
        "ggH_PTH_450_650",
        "ggH_PTH_GT650",
        "ggH_0J_PTH_0_10",
        "ggH_0J_PTH_GT10",
        "ggH_1J_PTH_0_60",
        "ggH_1J_PTH_60_120",
        "ggH_1J_PTH_120_200",
        "ggH_GE2J_MJJ_0_350_PTH_0_60",
        "ggH_GE2J_MJJ_0_350_PTH_60_120",
        "ggH_GE2J_MJJ_0_350_PTH_120_200",
        "ggH_GE2J_MJJ_350_700_PTH_0_200_PTHJJ_0_25",
        "ggH_GE2J_MJJ_350_700_PTH_0_200_PTHJJ_GT25",
        "ggH_GE2J_MJJ_GT700_PTH_0_200_PTHJJ_0_25",
        "ggH_GE2J_MJJ_GT700_PTH_0_200_PTHJJ_GT25",
    ],
    "qqH": [
        "qqH_0J",
        "qqH_1J",
        "qqH_GE2J_MJJ_0_60",
        "qqH_GE2J_MJJ_60_120",
        "qqH_GE2J_MJJ_120_350",
        "qqH_GE2J_MJJ_GT350_PTH_GT200",
        "qqH_GE2J_MJJ_350_700_PTH_0_200_PTHJJ_0_25",
        "qqH_GE2J_MJJ_350_700_PTH_0_200_PTHJJ_GT25",
        "qqH_GE2J_MJJ_GT700_PTH_0_200_PTHJJ_0_25",
        "qqH_GE2J_MJJ_GT700_PTH_0_200_PTHJJ_GT25",
    ],
    "WH_lep": ["WH_lep_PTV_0_75", "WH_lep_PTV_75_150", "WH_lep_PTV_150_250_0J", "WH_lep_PTV_150_250_GE1J", "WH_lep_PTV_GT250"],
    "ZH_lep": ["ZH_lep_PTV_0_75", "ZH_lep_PTV_75_150", "ZH_lep_PTV_150_250_0J", "ZH_lep_PTV_150_250_GE1J", "ZH_lep_PTV_GT250"],
    "ggZH_lep": ["ggZH_lep_PTV_0_75", "ggZH_lep_PTV_75_150", "ggZH_lep_PTV_150_250_0J", "ggZH_lep_PTV_150_250_GE1J", "ggZH_lep_PTV_GT250"],
    "VH_had": [
        "WH_had_0J",
        "WH_had_1J",
        "WH_had_GE2J_MJJ_0_60",
        "WH_had_GE2J_MJJ_60_120",
        "WH_had_GE2J_MJJ_120_350",
        "WH_had_GE2J_MJJ_GT350_PTH_GT200",
        "WH_had_GE2J_MJJ_350_700_PTH_0_200_PTHJJ_0_25",
        "WH_had_GE2J_MJJ_350_700_PTH_0_200_PTHJJ_GT25",
        "WH_had_GE2J_MJJ_GT700_PTH_0_200_PTHJJ_0_25",
        "WH_had_GE2J_MJJ_GT700_PTH_0_200_PTHJJ_GT25",
        "ZH_had_0J",
        "ZH_had_1J",
        "ZH_had_GE2J_MJJ_0_60",
        "ZH_had_GE2J_MJJ_60_120",
        "ZH_had_GE2J_MJJ_120_350",
        "ZH_had_GE2J_MJJ_GT350_PTH_GT200",
        "ZH_had_GE2J_MJJ_350_700_PTH_0_200_PTHJJ_0_25",
        "ZH_had_GE2J_MJJ_350_700_PTH_0_200_PTHJJ_GT25",
        "ZH_had_GE2J_MJJ_GT700_PTH_0_200_PTHJJ_0_25",
        "ZH_had_GE2J_MJJ_GT700_PTH_0_200_PTHJJ_GT25",
    ],
    "ttH": ["ttH_PTH_0_60", "ttH_PTH_60_120", "ttH_PTH_60_120", "ttH_PTH_120_200", "ttH_PTH_200_300", "ttH_PTH_GT300"],
    "other": ["tHq", "tHW", "bbH"],
}

stage1_2_fine_procs = {  # Hopefully temporary while VH(bb) haven't provided correct stage 1.2 splitting
    "ttH_PTH_GT300": ["ttH_PTH_300_450", "ttH_PTH_GT450"],
    "WH_lep_PTV_0_75": ["WH_lep_PTV_0_75_1J","WH_lep_PTV_0_75_GE2J"],
    "WH_lep_PTV_75_150": ["WH_lep_PTV_75_150_1J","WH_lep_PTV_75_150_GE2J"],
    "WH_lep_PTV_150_250_GE1J": ["WH_lep_PTV_150_250_1J","WH_lep_PTV_150_250_GE2J"],
    "WH_lep_PTV_GT250": ["WH_lep_PTV_250_400", "WH_lep_PTV_GT400","WH_lep_PTV_250_400_1J","WH_lep_PTV_250_400_GE2J","WH_lep_PTV_GT400_0J","WH_lep_PTV_GT400_1J","WH_lep_PTV_GT400_GE2J"],
    "ZH_lep_PTV_0_75": ["ZH_lep_PTV_0_75_1J","ZH_lep_PTV_0_75_GE2J"],
    "ZH_lep_PTV_75_150": ["ZH_lep_PTV_75_150_1J","ZH_lep_PTV_75_150_GE2J"],
    "ZH_lep_PTV_150_250_GE1J": ["ZH_lep_PTV_150_250_1J","ZH_lep_PTV_150_250_GE2J"],
    "ZH_lep_PTV_GT250": ["ZH_lep_PTV_250_400", "ZH_lep_PTV_GT400","ZH_lep_PTV_250_400_1J","ZH_lep_PTV_250_400_GE2J","ZH_lep_PTV_GT400_0J","ZH_lep_PTV_GT400_1J","ZH_lep_PTV_GT400_GE2J"],
    "ggZH_lep_PTV_0_75": ["ggZH_ll_PTV_0_75", "ggZH_nunu_PTV_0_75","ggZH_lep_PTV_0_75_1J","ggZH_lep_PTV_0_75_GE2J"],
    "ggZH_lep_PTV_75_150": ["ggZH_ll_PTV_75_150", "ggZH_nunu_PTV_75_150","ggZH_lep_PTV_75_150_1J","ggZH_lep_PTV_75_150_GE2J"],
    "ggZH_lep_PTV_150_250_0J": ["ggZH_ll_PTV_150_250_0J", "ggZH_nunu_PTV_150_250_0J"],
    "ggZH_lep_PTV_150_250_GE1J": ["ggZH_ll_PTV_150_250_GE1J", "ggZH_nunu_PTV_150_250_GE1J","ggZH_lep_PTV_150_250_1J","ggZH_lep_PTV_150_250_GE2J"],
    "ggZH_lep_PTV_GT250": ["ggZH_ll_PTV_GT250", "ggZH_nunu_PTV_GT250","ggZH_lep_PTV_250_400", "ggZH_lep_PTV_GT400","ggZH_lep_PTV_250_400_1J","ggZH_lep_PTV_250_400_GE2J","ggZH_lep_PTV_GT400_0J","ggZH_lep_PTV_GT400_1J","ggZH_lep_PTV_GT400_GE2J"],
    "ggH_PTH_200_300": ["ggZH_had_PTH_200_300", "ggH_PTH_200_300_PTHJoverPTH_0_15", "ggH_PTH_200_300_PTHJoverPTH_GT15"],
    "ggH_PTH_300_450": ["ggZH_had_PTH_300_450", "ggH_PTH_300_450_PTHJoverPTH_0_15", "ggH_PTH_300_450_PTHJoverPTH_GT15"],
    "ggH_PTH_450_650": ["ggZH_had_PTH_450_650", "ggH_PTH_450_650_PTHJoverPTH_0_15", "ggH_PTH_450_650_PTHJoverPTH_GT15"],
    "ggH_PTH_GT650": ["ggZH_had_PTH_GT650", "ggH_PTH_GT650_PTHJoverPTH_0_15", "ggH_PTH_GT650_PTHJoverPTH_GT15"],
    "ggH_0J_PTH_0_10": ["ggZH_had_0J_PTH_0_10"],
    "ggH_0J_PTH_GT10": ["ggZH_had_0J_PTH_GT10"],
    "ggH_1J_PTH_0_60": ["ggZH_had_1J_PTH_0_60"],
    "ggH_1J_PTH_60_120": ["ggZH_had_1J_PTH_60_120"],
    "ggH_1J_PTH_120_200": ["ggZH_had_1J_PTH_120_200"],
    "ggH_GE2J_MJJ_0_350_PTH_0_60": ["ggZH_had_GE2J_MJJ_0_350_PTH_0_60"],
    "ggH_GE2J_MJJ_0_350_PTH_60_120": ["ggZH_had_GE2J_MJJ_0_350_PTH_60_120"],
    "ggH_GE2J_MJJ_0_350_PTH_120_200": ["ggZH_had_GE2J_MJJ_0_350_PTH_120_200"],
    "ggH_GE2J_MJJ_350_700_PTH_0_200_PTHJJ_0_25": ["ggZH_had_GE2J_MJJ_350_700_PTH_0_200_PTHJJ_0_25"],
    "ggH_GE2J_MJJ_350_700_PTH_0_200_PTHJJ_GT25": ["ggZH_had_GE2J_MJJ_350_700_PTH_0_200_PTHJJ_GT25"],
    "ggH_GE2J_MJJ_GT700_PTH_0_200_PTHJJ_0_25": ["ggZH_had_GE2J_MJJ_GT700_PTH_0_200_PTHJJ_0_25","ggH_GE2J_MJJ_1000_1500_PTH_0_200_PTHJJ_0_25","ggH_GE2J_MJJ_700_1000_PTH_0_200_PTHJJ_0_25","ggH_GE2J_MJJ_GT1500_PTH_0_200_PTHJJ_0_25"],
    "ggH_GE2J_MJJ_GT700_PTH_0_200_PTHJJ_GT25": ["ggZH_had_GE2J_MJJ_GT700_PTH_0_200_PTHJJ_GT25","ggH_GE2J_MJJ_1000_1500_PTH_0_200_PTHJJ_GT25","ggH_GE2J_MJJ_700_1000_PTH_0_200_PTHJJ_GT25","ggH_GE2J_MJJ_GT1500_PTH_0_200_PTHJJ_GT25"],
    # For H->bb boosted (STXS) cards
    "qqH_GE2J_MJJ_0_60": ["qqH_GE2J_MJJ_0_60_PTHJJ_GT25"],
    "qqH_GE2J_MJJ_60_120": ["qqH_GE2J_MJJ_60_120_PTHJJ_0_25", "qqH_GE2J_MJJ_60_120_PTHJJ_GT25"],
    "qqH_GE2J_MJJ_120_350": ["qqH_GE2J_MJJ_120_350_PTHJJ_0_25", "qqH_GE2J_MJJ_120_350_PTHJJ_GT25"],
    "qqH_GE2J_MJJ_GT700_PTH_0_200_PTHJJ_0_25": ["qqH_GE2J_MJJ_1000_1500_PTH_0_200_PTHJJ_0_25","qqH_GE2J_MJJ_700_1000_PTH_0_200_PTHJJ_0_25","qqH_GE2J_MJJ_GT1500_PTH_0_200_PTHJJ_0_25"],
    "qqH_GE2J_MJJ_GT700_PTH_0_200_PTHJJ_GT25": ["qqH_GE2J_MJJ_1000_1500_PTH_0_200_PTHJJ_GT25","qqH_GE2J_MJJ_700_1000_PTH_0_200_PTHJJ_GT25","qqH_GE2J_MJJ_GT1500_PTH_0_200_PTHJJ_GT25"],
    "qqH_GE2J_MJJ_GT350_PTH_GT200": ["qqH_GE2J_MJJ_350_700_PTH_GT200_PTHJJ_0_25", "qqH_GE2J_MJJ_350_700_PTH_GT200_PTHJJ_GT25", "qqH_GE2J_MJJ_700_1000_PTH_GT200_PTHJJ_0_25", "qqH_GE2J_MJJ_700_1000_PTH_GT200_PTHJJ_GT25", "qqH_GE2J_MJJ_1000_1500_PTH_GT200_PTHJJ_0_25", "qqH_GE2J_MJJ_1000_1500_PTH_GT200_PTHJJ_GT25", "qqH_GE2J_MJJ_GT1500_PTH_GT200_PTHJJ_0_25", "qqH_GE2J_MJJ_GT1500_PTH_GT200_PTHJJ_GT25"],
    "WH_had_GE2J_MJJ_60_120": ["WH_had_GE2J_MJJ_60_120_PTHJJ_0_25", "WH_had_GE2J_MJJ_60_120_PTHJJ_GT25"],
    "WH_had_GE2J_MJJ_120_350": ["WH_had_GE2J_MJJ_120_350_PTHJJ_0_25", "WH_had_GE2J_MJJ_120_350_PTHJJ_GT25"],
    "WH_had_GE2J_MJJ_GT700_PTH_0_200_PTHJJ_0_25": ["WH_had_GE2J_MJJ_1000_1500_PTH_0_200_PTHJJ_0_25","WH_had_GE2J_MJJ_700_1000_PTH_0_200_PTHJJ_0_25","WH_had_GE2J_MJJ_GT1500_PTH_0_200_PTHJJ_0_25"],
    "WH_had_GE2J_MJJ_GT700_PTH_0_200_PTHJJ_GT25": ["WH_had_GE2J_MJJ_1000_1500_PTH_0_200_PTHJJ_GT25","WH_had_GE2J_MJJ_700_1000_PTH_0_200_PTHJJ_GT25","WH_had_GE2J_MJJ_GT1500_PTH_0_200_PTHJJ_GT25"],
    "WH_had_GE2J_MJJ_GT350_PTH_GT200": ["WH_had_GE2J_MJJ_350_700_PTH_GT200_PTHJJ_0_25", "WH_had_GE2J_MJJ_350_700_PTH_GT200_PTHJJ_GT25", "WH_had_GE2J_MJJ_700_1000_PTH_GT200_PTHJJ_0_25", "WH_had_GE2J_MJJ_700_1000_PTH_GT200_PTHJJ_GT25", "WH_had_GE2J_MJJ_1000_1500_PTH_GT200_PTHJJ_0_25", "WH_had_GE2J_MJJ_1000_1500_PTH_GT200_PTHJJ_GT25", "WH_had_GE2J_MJJ_GT1500_PTH_GT200_PTHJJ_0_25", "WH_had_GE2J_MJJ_GT1500_PTH_GT200_PTHJJ_GT25"],
    "ZH_had_GE2J_MJJ_60_120": ["ZH_had_GE2J_MJJ_60_120_PTHJJ_0_25", "ZH_had_GE2J_MJJ_60_120_PTHJJ_GT25"],
    "ZH_had_GE2J_MJJ_120_350": ["ZH_had_GE2J_MJJ_120_350_PTHJJ_0_25", "ZH_had_GE2J_MJJ_120_350_PTHJJ_GT25"],
    "ZH_had_GE2J_MJJ_GT700_PTH_0_200_PTHJJ_0_25": ["ZH_had_GE2J_MJJ_1000_1500_PTH_0_200_PTHJJ_0_25","ZH_had_GE2J_MJJ_700_1000_PTH_0_200_PTHJJ_0_25","ZH_had_GE2J_MJJ_GT1500_PTH_0_200_PTHJJ_0_25"],
    "ZH_had_GE2J_MJJ_GT700_PTH_0_200_PTHJJ_GT25": ["ZH_had_GE2J_MJJ_1000_1500_PTH_0_200_PTHJJ_GT25","ZH_had_GE2J_MJJ_700_1000_PTH_0_200_PTHJJ_GT25","ZH_had_GE2J_MJJ_GT1500_PTH_0_200_PTHJJ_GT25"],
    "ZH_had_GE2J_MJJ_GT350_PTH_GT200": ["ZH_had_GE2J_MJJ_350_700_PTH_GT200_PTHJJ_0_25", "ZH_had_GE2J_MJJ_350_700_PTH_GT200_PTHJJ_GT25", "ZH_had_GE2J_MJJ_700_1000_PTH_GT200_PTHJJ_0_25", "ZH_had_GE2J_MJJ_700_1000_PTH_GT200_PTHJJ_GT25", "ZH_had_GE2J_MJJ_1000_1500_PTH_GT200_PTHJJ_0_25", "ZH_had_GE2J_MJJ_1000_1500_PTH_GT200_PTHJJ_GT25", "ZH_had_GE2J_MJJ_GT1500_PTH_GT200_PTHJJ_0_25", "ZH_had_GE2J_MJJ_GT1500_PTH_GT200_PTHJJ_GT25"],

}

# Use weighted-sum for scaling functions
stage1_2_merged_procs = {
    # Sums for VH leptonic binning in HWW inputs
    "WW": {
        "WH_lep_PTV_LT150" : {
            "WH_lep_PTV_0_75" : 0.6137112722478577,
            "WH_lep_PTV_75_150" : 0.3862887277521423,
        },
        "ZH_lep_PTV_LT150" : {
            "ZH_lep_PTV_0_75" : 0.5979043876882776,
            "ZH_lep_PTV_75_150" : 0.4020956123117223,
        },
        "ggZH_lep_PTV_LT150" : {
            "ggZH_lep_PTV_0_75" : 0.2706576728499157,
            "ggZH_lep_PTV_75_150" : 0.7293423271500843,
        },
        "WH_lep_PTV_GT150" : {
            "WH_lep_PTV_150_250_0J" : 0.42429284525790345,
            "WH_lep_PTV_150_250_GE1J" : 0.3302828618968386,
            "WH_lep_PTV_GT250" : 0.24542429284525788,
        },
        "ZH_lep_PTV_GT150" : {
            "ZH_lep_PTV_150_250_0J" : 0.41479099678456594,
            "ZH_lep_PTV_150_250_GE1J" : 0.3432475884244373,
            "ZH_lep_PTV_GT250" : 0.24196141479099678,
        },
        "ggZH_lep_PTV_GT150" : {
            "ggZH_lep_PTV_150_250_0J" : 0.24019994738226785,
            "ggZH_lep_PTV_150_250_GE1J" : 0.5377532228360957,
            "ggZH_lep_PTV_GT250" : 0.22204682978163642,
        }
    }
}

# Mapping of fine procs to nominal STXS bin for SMEFT scaling functions
stxs1p2_fine_smeft_mapping = {
    "WH_had_GE2J_MJJ_1000_1500_PTH_0_200_PTHJJ_0_25" : "WH_had_GE2J_MJJ_GT700_PTH_0_200_PTHJJ_0_25",
    "WH_had_GE2J_MJJ_1000_1500_PTH_0_200_PTHJJ_GT25" : "WH_had_GE2J_MJJ_GT700_PTH_0_200_PTHJJ_GT25",
    "WH_had_GE2J_MJJ_1000_1500_PTH_GT200_PTHJJ_0_25" : "WH_had_GE2J_MJJ_GT350_PTH_GT200",
    "WH_had_GE2J_MJJ_1000_1500_PTH_GT200_PTHJJ_GT25" : "WH_had_GE2J_MJJ_GT350_PTH_GT200",
    "WH_had_GE2J_MJJ_120_350_PTHJJ_0_25" : "WH_had_GE2J_MJJ_120_350",
    "WH_had_GE2J_MJJ_120_350_PTHJJ_GT25" : "WH_had_GE2J_MJJ_120_350",
    "WH_had_GE2J_MJJ_350_700_PTH_GT200_PTHJJ_0_25" : "WH_had_GE2J_MJJ_GT350_PTH_GT200",
    "WH_had_GE2J_MJJ_350_700_PTH_GT200_PTHJJ_GT25" : "WH_had_GE2J_MJJ_GT350_PTH_GT200",
    "WH_had_GE2J_MJJ_60_120_PTHJJ_0_25" : "WH_had_GE2J_MJJ_60_120",
    "WH_had_GE2J_MJJ_60_120_PTHJJ_GT25" : "WH_had_GE2J_MJJ_60_120",
    "WH_had_GE2J_MJJ_700_1000_PTH_0_200_PTHJJ_0_25" : "WH_had_GE2J_MJJ_GT700_PTH_0_200_PTHJJ_0_25",
    "WH_had_GE2J_MJJ_700_1000_PTH_0_200_PTHJJ_GT25" : "WH_had_GE2J_MJJ_GT700_PTH_0_200_PTHJJ_GT25",
    "WH_had_GE2J_MJJ_700_1000_PTH_GT200_PTHJJ_0_25" : "WH_had_GE2J_MJJ_GT350_PTH_GT200",
    "WH_had_GE2J_MJJ_700_1000_PTH_GT200_PTHJJ_GT25" : "WH_had_GE2J_MJJ_GT350_PTH_GT200",
    "WH_had_GE2J_MJJ_GT1500_PTH_0_200_PTHJJ_0_25" : "WH_had_GE2J_MJJ_GT700_PTH_0_200_PTHJJ_0_25",
    "WH_had_GE2J_MJJ_GT1500_PTH_0_200_PTHJJ_GT25" : "WH_had_GE2J_MJJ_GT700_PTH_0_200_PTHJJ_GT25",
    "WH_had_GE2J_MJJ_GT1500_PTH_GT200_PTHJJ_0_25" : "WH_had_GE2J_MJJ_GT350_PTH_GT200",
    "WH_had_GE2J_MJJ_GT1500_PTH_GT200_PTHJJ_GT25" : "WH_had_GE2J_MJJ_GT350_PTH_GT200",
    "ZH_had_GE2J_MJJ_1000_1500_PTH_0_200_PTHJJ_0_25" : "ZH_had_GE2J_MJJ_GT700_PTH_0_200_PTHJJ_0_25",
    "ZH_had_GE2J_MJJ_1000_1500_PTH_0_200_PTHJJ_GT25" : "ZH_had_GE2J_MJJ_GT700_PTH_0_200_PTHJJ_GT25",
    "ZH_had_GE2J_MJJ_1000_1500_PTH_GT200_PTHJJ_0_25" : "ZH_had_GE2J_MJJ_GT350_PTH_GT200",
    "ZH_had_GE2J_MJJ_1000_1500_PTH_GT200_PTHJJ_GT25" : "ZH_had_GE2J_MJJ_GT350_PTH_GT200",
    "ZH_had_GE2J_MJJ_120_350_PTHJJ_0_25" : "ZH_had_GE2J_MJJ_120_350",
    "ZH_had_GE2J_MJJ_120_350_PTHJJ_GT25" : "ZH_had_GE2J_MJJ_120_350",
    "ZH_had_GE2J_MJJ_350_700_PTH_GT200_PTHJJ_0_25" : "ZH_had_GE2J_MJJ_GT350_PTH_GT200",
    "ZH_had_GE2J_MJJ_350_700_PTH_GT200_PTHJJ_GT25" : "ZH_had_GE2J_MJJ_GT350_PTH_GT200",
    "ZH_had_GE2J_MJJ_60_120_PTHJJ_0_25" : "ZH_had_GE2J_MJJ_60_120",
    "ZH_had_GE2J_MJJ_60_120_PTHJJ_GT25" : "ZH_had_GE2J_MJJ_60_120",
    "ZH_had_GE2J_MJJ_700_1000_PTH_0_200_PTHJJ_0_25" : "ZH_had_GE2J_MJJ_GT700_PTH_0_200_PTHJJ_0_25",
    "ZH_had_GE2J_MJJ_700_1000_PTH_0_200_PTHJJ_GT25" : "ZH_had_GE2J_MJJ_GT700_PTH_0_200_PTHJJ_GT25",
    "ZH_had_GE2J_MJJ_700_1000_PTH_GT200_PTHJJ_0_25" : "ZH_had_GE2J_MJJ_GT350_PTH_GT200",
    "ZH_had_GE2J_MJJ_700_1000_PTH_GT200_PTHJJ_GT25" : "ZH_had_GE2J_MJJ_GT350_PTH_GT200",
    "ZH_had_GE2J_MJJ_GT1500_PTH_0_200_PTHJJ_0_25" : "ZH_had_GE2J_MJJ_GT700_PTH_0_200_PTHJJ_0_25",
    "ZH_had_GE2J_MJJ_GT1500_PTH_0_200_PTHJJ_GT25" : "ZH_had_GE2J_MJJ_GT700_PTH_0_200_PTHJJ_GT25",
    "ZH_had_GE2J_MJJ_GT1500_PTH_GT200_PTHJJ_0_25" : "ZH_had_GE2J_MJJ_GT350_PTH_GT200",
    "ZH_had_GE2J_MJJ_GT1500_PTH_GT200_PTHJJ_GT25" : "ZH_had_GE2J_MJJ_GT350_PTH_GT200",
    "qqH_GE2J_MJJ_0_60_PTHJJ_GT25" : "qqH_GE2J_MJJ_0_60",
    "qqH_GE2J_MJJ_1000_1500_PTH_0_200_PTHJJ_0_25" : "qqH_GE2J_MJJ_GT700_PTH_0_200_PTHJJ_0_25",
    "qqH_GE2J_MJJ_1000_1500_PTH_0_200_PTHJJ_GT25" : "qqH_GE2J_MJJ_GT700_PTH_0_200_PTHJJ_GT25",
    "qqH_GE2J_MJJ_1000_1500_PTH_GT200_PTHJJ_0_25" : "qqH_GE2J_MJJ_GT350_PTH_GT200",
    "qqH_GE2J_MJJ_1000_1500_PTH_GT200_PTHJJ_GT25" : "qqH_GE2J_MJJ_GT350_PTH_GT200",
    "qqH_GE2J_MJJ_120_350_PTHJJ_0_25" : "qqH_GE2J_MJJ_120_350",
    "qqH_GE2J_MJJ_120_350_PTHJJ_GT25" : "qqH_GE2J_MJJ_120_350",
    "qqH_GE2J_MJJ_350_700_PTH_GT200_PTHJJ_0_25" : "qqH_GE2J_MJJ_GT350_PTH_GT200",
    "qqH_GE2J_MJJ_350_700_PTH_GT200_PTHJJ_GT25" : "qqH_GE2J_MJJ_GT350_PTH_GT200",
    "qqH_GE2J_MJJ_60_120_PTHJJ_0_25" : "qqH_GE2J_MJJ_60_120",
    "qqH_GE2J_MJJ_60_120_PTHJJ_GT25" : "qqH_GE2J_MJJ_60_120",
    "qqH_GE2J_MJJ_700_1000_PTH_0_200_PTHJJ_0_25" : "qqH_GE2J_MJJ_GT700_PTH_0_200_PTHJJ_0_25",
    "qqH_GE2J_MJJ_700_1000_PTH_0_200_PTHJJ_GT25" : "qqH_GE2J_MJJ_GT700_PTH_0_200_PTHJJ_GT25",
    "qqH_GE2J_MJJ_700_1000_PTH_GT200_PTHJJ_0_25" : "qqH_GE2J_MJJ_GT350_PTH_GT200",
    "qqH_GE2J_MJJ_700_1000_PTH_GT200_PTHJJ_GT25" : "qqH_GE2J_MJJ_GT350_PTH_GT200",
    "qqH_GE2J_MJJ_GT1500_PTH_0_200_PTHJJ_0_25" : "qqH_GE2J_MJJ_GT700_PTH_0_200_PTHJJ_0_25",
    "qqH_GE2J_MJJ_GT1500_PTH_0_200_PTHJJ_GT25" : "qqH_GE2J_MJJ_GT700_PTH_0_200_PTHJJ_GT25",
    "qqH_GE2J_MJJ_GT1500_PTH_GT200_PTHJJ_0_25" : "qqH_GE2J_MJJ_GT350_PTH_GT200",
    "qqH_GE2J_MJJ_GT1500_PTH_GT200_PTHJJ_GT25" : "qqH_GE2J_MJJ_GT350_PTH_GT200",
    "WH_lep_PTV_0_75_1J" : "WH_lep_PTV_0_75",
    "WH_lep_PTV_0_75_GE2J" : "WH_lep_PTV_0_75",
    "WH_lep_PTV_150_250_1J" : "WH_lep_PTV_150_250_GE1J",
    "WH_lep_PTV_150_250_GE2J" : "WH_lep_PTV_150_250_GE1J",
    "WH_lep_PTV_250_400_1J" : "WH_lep_PTV_250_400",
    "WH_lep_PTV_250_400_GE2J" : "WH_lep_PTV_250_400",
    "WH_lep_PTV_75_150_1J" : "WH_lep_PTV_75_150",
    "WH_lep_PTV_75_150_GE2J" : "WH_lep_PTV_75_150",
    "WH_lep_PTV_GT400_0J" : "WH_lep_PTV_GT400",
    "WH_lep_PTV_GT400_1J" : "WH_lep_PTV_GT400",
    "WH_lep_PTV_GT400_GE2J" : "WH_lep_PTV_GT400",
    "ZH_lep_PTV_0_75_GE2J" : "ZH_lep_PTV_0_75",
    "ZH_lep_PTV_150_250_1J" : "ZH_lep_PTV_150_250_GE1J",
    "ZH_lep_PTV_150_250_GE2J" : "ZH_lep_PTV_150_250_GE1J",
    "ZH_lep_PTV_250_400_GE2J" : "ZH_lep_PTV_250_400",
    "ZH_lep_PTV_250_400_1J" : "ZH_lep_PTV_250_400",
    "ZH_lep_PTV_75_150_1J" : "ZH_lep_PTV_75_150",
    "ZH_lep_PTV_75_150_GE2J" : "ZH_lep_PTV_75_150",
    "ZH_lep_PTV_GT400_0J" : "ZH_lep_PTV_GT400",
    "ZH_lep_PTV_GT400_1J" : "ZH_lep_PTV_GT400",
    "ZH_lep_PTV_GT400_GE2J" : "ZH_lep_PTV_GT400",
    #"ZH_lep_PTV_GT400" : "ZH_lep_PTV_GT250",
    "ggH_GE2J_MJJ_1000_1500_PTH_0_200_PTHJJ_0_25" : "ggH_GE2J_MJJ_GT700_PTH_0_200_PTHJJ_0_25",
    "ggH_GE2J_MJJ_1000_1500_PTH_0_200_PTHJJ_GT25" : "ggH_GE2J_MJJ_GT700_PTH_0_200_PTHJJ_GT25",
    "ggH_GE2J_MJJ_700_1000_PTH_0_200_PTHJJ_0_25" : "ggH_GE2J_MJJ_GT700_PTH_0_200_PTHJJ_0_25",
    "ggH_GE2J_MJJ_700_1000_PTH_0_200_PTHJJ_GT25" : "ggH_GE2J_MJJ_GT700_PTH_0_200_PTHJJ_GT25",
    "ggH_GE2J_MJJ_GT1500_PTH_0_200_PTHJJ_0_25" : "ggH_GE2J_MJJ_GT700_PTH_0_200_PTHJJ_0_25",
    "ggH_GE2J_MJJ_GT1500_PTH_0_200_PTHJJ_GT25" : "ggH_GE2J_MJJ_GT700_PTH_0_200_PTHJJ_GT25",
    "ggH_PTH_200_300_PTHJoverPTH_0_15" : "ggH_PTH_200_300",
    "ggH_PTH_200_300_PTHJoverPTH_GT15" : "ggH_PTH_200_300",
    "ggH_PTH_300_450_PTHJoverPTH_0_15" : "ggH_PTH_300_450",
    "ggH_PTH_300_450_PTHJoverPTH_GT15" : "ggH_PTH_300_450",
    "ggH_PTH_450_650_PTHJoverPTH_0_15" : "ggH_PTH_450_650",
    "ggH_PTH_450_650_PTHJoverPTH_GT15" : "ggH_PTH_450_650",
    "ggH_PTH_GT650_PTHJoverPTH_0_15" : "ggH_PTH_GT650",
    "ggH_PTH_GT650_PTHJoverPTH_GT15" : "ggH_PTH_GT650",
    "ggZH_lep_PTV_0_75_1J" : "ggZH_lep_PTV_0_75",
    "ggZH_lep_PTV_0_75_GE2J" : "ggZH_lep_PTV_0_75",
    "ggZH_lep_PTV_150_250_1J" : "ggZH_lep_PTV_150_250_GE1J",
    "ggZH_lep_PTV_150_250_GE2J" : "ggZH_lep_PTV_150_250_GE1J",
    "ggZH_lep_PTV_250_400_1J" : "ggZH_lep_PTV_GT250",
    "ggZH_lep_PTV_250_400_GE2J" : "ggZH_lep_PTV_GT250",
    "ggZH_lep_PTV_250_400" : "ggZH_lep_PTV_GT250",
    "ggZH_lep_PTV_75_150_1J" : "ggZH_lep_PTV_75_150",
    "ggZH_lep_PTV_75_150_GE2J" : "ggZH_lep_PTV_75_150",
    "ggZH_lep_PTV_GT400_0J" : "ggZH_lep_PTV_GT250",
    "ggZH_lep_PTV_GT400_1J" : "ggZH_lep_PTV_GT250",
    "ggZH_lep_PTV_GT400_GE2J" : "ggZH_lep_PTV_GT250",
    "ggZH_lep_PTV_GT400" : "ggZH_lep_PTV_GT250"
}

